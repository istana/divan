for ruby 1.9
using define_singleton_method and require_relative
using securerandom
 
